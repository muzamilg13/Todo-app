{"ast":null,"code":"import _defineProperty from\"/home/ubuntu/mern-todo-app/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/ubuntu/mern-todo-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/ubuntu/mern-todo-app/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ubuntu/mern-todo-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ubuntu/mern-todo-app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import{Link,Navigate}from'react-router-dom';import axios from\"../Axios/axios.js\";import TokenContext from'../context/TokenContext.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useContext=useContext(TokenContext),userToken=_useContext.userToken,tokenDispatch=_useContext.tokenDispatch,userDispatch=_useContext.userDispatch;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"/user/login\",formData);case 4:result=_context.sent;tokenDispatch({type:\"SET_TOKEN\",payload:result.data.token});userDispatch({type:\"SET_USER\",payload:result.data.user});localStorage.setItem(\"authToken\",JSON.stringify(result.data.token));_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setError({message:_context.t0.response.data.message});case 14:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};return/*#__PURE__*/_jsxs(\"div\",{children:[userToken&&/*#__PURE__*/_jsx(Navigate,{to:\"/\"}),/*#__PURE__*/_jsx(\"section\",{className:\"login-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"px-6 h-full text-gray-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex xl:justify-center lg:justify-between justify-center items-center flex-wrap h-full g-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grow-0 shrink-1 md:shrink-0 basis-auto xl:w-6/12 lg:w-6/12 md:w-9/12 mb-12 md:mb-0\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp\",className:\"w-full\",alt:\"Sample\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"xl:ml-20 xl:w-5/12 lg:w-5/12 md:w-8/12 mb-12 md:mb-0\",children:/*#__PURE__*/_jsxs(\"form\",{method:\"post\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{children:error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center border-2 border-green-600 p-2 mb-2 rounded-md bg-red-200 shadow-2xl\",children:error.message})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",onChange:handleChange,className:\"form-control block w-full px-4 py-2 text-xl font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none\",id:\"emailInput\",placeholder:\"Email address\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:handleChange,className:\"form-control block w-full px-4 py-2 text-xl font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none\",id:\"passInput\",placeholder:\"Password\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mb-6\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgotPassword\",children:\"Forgot Password?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center lg:text-left\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,className:\"inline-block px-7 py-3 bg-blue-600 text-white font-medium text-sm leading-snug uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-semibold mt-2 pt-1 mb-0\",children:[\"Don't have an account?\",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-red-600 hover:text-red-700 focus:text-red-700 transition duration-200 ease-in-out ml-5\",children:\"Register\"})]})]})]})})]})})})]});}export default Login;","map":{"version":3,"names":["React","useState","useContext","Link","Navigate","axios","TokenContext","Login","formData","setFormData","userToken","tokenDispatch","userDispatch","error","setError","handleSubmit","e","preventDefault","post","result","type","payload","data","token","user","localStorage","setItem","JSON","stringify","console","log","message","response","handleChange","target","name","value"],"sources":["/home/ubuntu/mern-todo-app/frontend/src/components/Login.jsx"],"sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Link, Navigate } from 'react-router-dom';\nimport axios from \"../Axios/axios.js\"\nimport TokenContext from '../context/TokenContext.js';\nfunction Login() {\n    const [formData, setFormData] = useState({});\n    const { userToken, tokenDispatch, userDispatch } = useContext(TokenContext);\n    const [error, setError] = useState();\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            const result = await axios.post(\"/user/login\", formData)\n            tokenDispatch({ type: \"SET_TOKEN\", payload: result.data.token })\n            userDispatch({ type: \"SET_USER\", payload: result.data.user })\n            localStorage.setItem(\"authToken\",JSON.stringify(result.data.token))\n        } catch (error) {\n            console.log(error);\n            setError({ message: error.response.data.message })\n        }\n    }\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setFormData({ ...formData, [name]: value })\n    }\n    return (\n        <div>\n            {userToken && <Navigate to=\"/\" />}\n            <section className=\"login-container\">\n                <div className=\"px-6 h-full text-gray-800\">\n                    <div className=\"flex xl:justify-center lg:justify-between justify-center items-center flex-wrap h-full g-6\">\n                        <div className=\"grow-0 shrink-1 md:shrink-0 basis-auto xl:w-6/12 lg:w-6/12 md:w-9/12 mb-12 md:mb-0\">\n                            <img src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp\" className=\"w-full\" alt=\"Sample\" />\n                        </div>\n                        <div className=\"xl:ml-20 xl:w-5/12 lg:w-5/12 md:w-8/12 mb-12 md:mb-0\">\n                            <form method='post' onSubmit={handleSubmit}>\n                                <div>\n                                    {error && (\n                                        <div className=\"text-center border-2 border-green-600 p-2 mb-2 rounded-md bg-red-200 shadow-2xl\">\n                                            {error.message}\n                                        </div>\n                                    )\n                                    }\n                                </div>\n                                {/* Email input */}\n                                <div className=\"mb-6\">\n                                    <input\n                                        type=\"text\"\n                                        name='email'\n                                        onChange={handleChange}\n                                        className=\"form-control block w-full px-4 py-2 text-xl font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none\"\n                                        id=\"emailInput\"\n                                        placeholder=\"Email address\" />\n                                </div>\n                                {/* Password input */}\n                                <div className=\"mb-6\">\n                                    <input\n                                        type=\"password\"\n                                        name='password'\n                                        onChange={handleChange}\n                                        className=\"form-control block w-full px-4 py-2 text-xl font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none\"\n                                        id=\"passInput\"\n                                        placeholder=\"Password\" />\n                                </div>\n                                <div className=\"flex justify-between items-center mb-6\">\n                                    <Link\n                                        to={\"/forgotPassword\"}\n                                    >Forgot Password?</Link>\n                                </div>\n                                <div className=\"text-center lg:text-left\">\n                                    <button\n                                        type=\"submit\"\n                                        onClick={handleSubmit}\n                                        className=\"inline-block px-7 py-3 bg-blue-600 text-white font-medium text-sm leading-snug uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out\">\n                                        Login\n                                    </button>\n                                    <p className=\"text-sm font-semibold mt-2 pt-1 mb-0\">\n                                        Don't have an account?\n                                        <Link\n                                            to={\"/register\"}\n                                            className=\"text-red-600 hover:text-red-700 focus:text-red-700 transition duration-200 ease-in-out ml-5\"\n                                        >Register</Link>\n                                    </p>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </section>\n\n        </div>\n    );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}